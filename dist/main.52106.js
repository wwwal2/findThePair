!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e),n(0);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"createElement",value:function(t,e){var n=document.createElement(t);return n.className=e,n}},{key:"selectElementsByClasses",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return t.concat(Array.from(document.body.getElementsByClassName(e)))}),[])}},{key:"switchProperty",value:function(t,e){for(var n=arguments.length,i=new Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return i.forEach((function(n){n[t]=e}))}},{key:"generateRandomValues",value:function(t){for(var e=[],n=t;0<n;n-=1)e.push(n);return e.concat(e).sort((function(){return Math.random()-.5}))}},{key:"addZero",value:function(t){return t<10?"0".concat(t):t}},{key:"createImg",value:function(e,n,i){var r=t.createElement("img",e);return r.disabled=!0,r.dataset.x=n,r.dataset.y=i,r}}],null&&i(e.prototype,null),n&&i(e,n),t}(),a=n.p+"img/cardBack.d4d88.jpg",s="frozen",o="active",l="opened",c="start",u="Play again";function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.counter=0,this.openImgTimeout=0,this.bufferCell={},this.nextBufferCell={}}var e,n;return e=t,(n=[{key:"init",value:function(t,e){t.target.dataset.state!==s&&(t.target.dataset.state=s,this.collect(t,e))}},{key:"collect",value:function(t,e){switch(this.counter){case 0:this.counter+=1,this.swapImage(t,e),this.bufferCell=t.target,this.bufferCell.imgSrc=e;break;case 1:this.counter+=1,this.swapImage(t,e),this.nextBufferCell=t.target,this.nextBufferCell.imgSrc=e,this.match();break;default:t.target.dataset.state=o,t.target.classList.remove("apply-fadeIn"),t.target.classList.add("apply-shake"),setTimeout((function(){t.target.classList.remove("apply-shake")}),1e3)}}},{key:"match",value:function(){var t=this;this.bufferCell.imgSrc===this.nextBufferCell.imgSrc?(this.bufferCell.dataset.state=l,this.nextBufferCell.dataset.state=l,this.clear()):this.openImgTimeout=setTimeout((function(){t.swapBack(t.bufferCell),t.swapBack(t.nextBufferCell),t.clear()}),1e3)}},{key:"swapImage",value:function(t,e){t.target.src="img/cells/".concat(e,".png")}},{key:"swapBack",value:function(t){t.dataset.state=o,t.src=a}},{key:"clear",value:function(){this.counter=0,this.nextBufferCell=0,this.bufferCell=0}},{key:"abort",value:function(){this.bufferCell&&(this.bufferCell.src=a),this.nextBufferCell&&(this.nextBufferCell.src=a),clearTimeout(this.openImgTimeout),this.clear()}}])&&h(e.prototype,n),t}();function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tableOfmatches=[],this.domLocation={},this.allCells=[],this.compare=new f}var e,n;return e=t,(n=[{key:"build",value:function(t){var e=this;this.tableOfmatches=[];var n=t*t;this.randomValues=r.generateRandomValues(Math.floor(n/2));var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(r.selectElementsByClasses("field-container"),1);return this.domLocation=i[0],this.domLocation.style.gridTemplateColumns="repeat(".concat(t,", 1fr)"),this.domLocation.classList.remove("hidden"),new Promise((function(n){for(var i=0;i<t;i+=1){e.tableOfmatches.push([]);for(var o=0;o<t;o+=1){var c=r.createImg("cells apply-fadeIn",i,o);c.src=a,c.dataset.state=s,e.allCells.push(c),e.domLocation.appendChild(c),e.tableOfmatches[i].push(e.randomValues.pop()),c.onclick=function(t){e.clickCell(t),e.cellsLeft=e.allCells.filter((function(t){return t.dataset.state===l})),e.cellsLeft.length===e.allCells.length&&n()}}}}))}},{key:"showAll",value:function(){var t=this;this.allCells.forEach((function(e){e.src="./img/cells/".concat(t.tableOfmatches[e.dataset.x][e.dataset.y],".png")}))}},{key:"hideAll",value:function(){this.allCells.forEach((function(t){t.src=a,t.dataset.state=o}))}},{key:"freezeAll",value:function(){this.allCells.forEach((function(t){t.dataset.state=s}))}},{key:"clickCell",value:function(t){var e=this.tableOfmatches[t.target.dataset.x][t.target.dataset.y];this.compare.init(t,e)}},{key:"removeField",value:function(){this.domLocation.childNodes&&(this.domLocation.innerHTML="",this.allCells=[])}}])&&m(e.prototype,n),t}();function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.totalTime=0,this.minutes=0,this.seconds=0,this.timerValue={},this.timerLabel={},this.previewTimeout=0,this.gameoverTimeout=0}var e,n;return e=t,(n=[{key:"preview",value:function(t){var e=this,n=v(r.selectElementsByClasses("timer-container"),1);this.timerContainer=n[0];var i=v(r.selectElementsByClasses("timer-value"),1);this.timerValue=i[0];var a=v(r.selectElementsByClasses("timer-label"),1);return this.timerLabel=a[0],new Promise((function(n){e.previewTimeout=setTimeout((function(){n()}),1e3*t)}))}},{key:"gameover",value:function(t){var e=this;return this.timerContainer.classList.remove("remove"),this.totalTime=60*Number(t),this.parseTime(this.totalTime),this.timerValue.innerText="".concat(this.minutes,":").concat(this.seconds),new Promise((function(t){e.gameoverTimeout=setInterval((function(){e.totalTime-=1,e.parseTime(e.totalTime),e.timerValue.innerText="".concat(e.minutes,":").concat(e.seconds),e.totalTime<=0&&(e.clear(),t())}),1e3)}))}},{key:"clear",value:function(){clearTimeout(this.gameoverTimeout),clearTimeout(this.previewTimeout),""!==this.timerValue.innerText&&this.timerValue.classList.add("gameOver")}},{key:"hide",value:function(){this.timerValue.innerText="",this.timerValue.classList.remove("gameOver"),this.timerContainer.classList.add("remove")}},{key:"parseTime",value:function(t){this.minutes=Math.floor(t/60),this.seconds=t%60,this.minutes=r.addZero(this.minutes),this.seconds=r.addZero(this.seconds)}}])&&y(e.prototype,n),t}();function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.saveSettings=e,this.buildField=n,this.removeField=i,this.fraction={},this.preview={},this.gameover={},this.direction=1}var e,n;return e=t,(n=[{key:"addAll",value:function(t){var e=this,n=g(r.selectElementsByClasses("options"),1);this.optionsBar=n[0];var i=g(r.selectElementsByClasses("inform-panel"),1);this.informPanel=i[0],Object.keys(t).forEach((function(n){e[n]={};var i=e[n],a=g(r.selectElementsByClasses(n),1);i.dom=a[0],i.dom.innerElements=Array.from(i.dom.children);var s=g(i.dom.innerElements,4);i.dom.label=s[0],i.dom.increase=s[1],i.dom.value=s[2],i.dom.reduce=s[3];var o=g(Object.values(t[n]),3);i.default=o[0],i.min=o[1],i.max=o[2],e.addMouseEvents(n),i.current=i.default,e.initialValidation(n),e.checkHighlightLimit(n),i.dom.value.innerText=i.current}))}},{key:"addMouseEvents",value:function(t){var e=this;this[t].dom.increase.onclick=function(){"fraction"===t&&e.fraction.current!==e.fraction.max&&(e.removeField(),e.buildField(e.fraction.current+2)),e.controllerHandler(t,1,e[t].max)},this[t].dom.reduce.onclick=function(){"fraction"===t&&e.fraction.current!==e.fraction.min&&(e.removeField(),e.buildField(e.fraction.current-2)),e.controllerHandler(t,-1,e[t].min)},this[t].dom.onmouseover=function(){e.optionsBar.innerText=e[t].dom.label.innerText},this[t].dom.onmouseout=function(){e.optionsBar.innerText="OPTIONS"}}},{key:"initialValidation",value:function(t){this.direction=1,this[t].current=this.validate(t,this[t].max-this[t].current,this[t].max),this.direction=-1,this[t].current=this.validate(t,this[t].current-this[t].min,this[t].min)}},{key:"controllerHandler",value:function(t,e,n){switch(this.direction=e){case 1:this[t].current+=1,this[t].current=this.validate(t,n-this[t].current,n),this[t].dom.value.innerText=this[t].current,this.checkHighlightLimit(t);break;case-1:this[t].current-=1,this[t].current=this.validate(t,this[t].current-n,n),this[t].dom.value.innerText=this[t].current,this.checkHighlightLimit(t)}this.saveSettings()}},{key:"checkHighlightLimit",value:function(t){this[t].current===this[t].max?this.switchClasses(this[t].dom.increase,"up","up-limit"):this.switchClasses(this[t].dom.increase,"up-limit","up"),this[t].current===this[t].min?this.switchClasses(this[t].dom.reduce,"down","down-limit"):this.switchClasses(this[t].dom.reduce,"down-limit","down")}},{key:"validate",value:function(t,e,n){return e<0?n:this.fraction.current%2?e?this[t].current+this.direction:this[t].current-this.direction:this[t].current}},{key:"switchClasses",value:function(t,e,n){t.classList.remove(e),t.classList.add(n)}},{key:"show",value:function(){r.switchProperty("className","inform-panel",this.informPanel)}},{key:"hide",value:function(){r.switchProperty("className","remove",this.informPanel)}}])&&b(e.prototype,n),t}(),k=n.p+"img/congratulations.c4e28.png";function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}new(function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=e,this.field=new d,this.controllers=new w((function(){return n.saveSettings()}),(function(t){return n.field.build(t)}),(function(){return n.field.removeField()})),this.timer=new p,this.startClass=c,this.startBtn={},this.cellsLeft=[],this.congratulation={}}var e,n;return e=t,(n=[{key:"run",value:function(){var t=this;localStorage.getItem("FindThePairGrid")&&this.readSettings(),this.controllers.addAll(this.settings),this.field.build(this.controllers.fraction.current).then((function(){return t.win()}));var e=C(r.selectElementsByClasses(this.startClass),1);this.startBtn=e[0],this.startBtn.dataset.phase=c,this.startBtn.onclick=function(){t.clickStart()}}},{key:"clickStart",value:function(){this.startBtn.dataset.phase===c?this.start():this.stop()}},{key:"start",value:function(){var t=this;this.startBtn.dataset.phase=u,this.startBtn.innerText=u,this.controllers.hide(),this.field.removeField(),this.field.build(this.controllers.fraction.current).then((function(){return t.win()})),this.field.showAll(),this.timer.preview(this.controllers.preview.current).then((function(){return t.field.hideAll(),t.timer.gameover(t.controllers.gameover.current)})).then((function(){t.field.freezeAll()}))}},{key:"stop",value:function(){this.startBtn.dataset.phase=c,this.startBtn.innerText=c,this.controllers.show(),this.field.compare.abort(),this.timer.clear(),this.timer.hide(),this.field.freezeAll(),this.congratulationRemove()}},{key:"win",value:function(){this.timer.clear(),this.timer.hide(),this.field.removeField(),this.field.domLocation.classList.add("hidden");var t=C(r.selectElementsByClasses("congratulation"),1);this.congratulation=t[0];var e=r.createElement("img","winImage");e.src=k,this.congratulation.appendChild(e)}},{key:"congratulationRemove",value:function(){var t=this;this.congratulation.children&&this.congratulation.children.item(0)&&(this.congratulation.children.item(0).remove(),this.field.build(this.controllers.fraction.current).then((function(){return t.win()})))}},{key:"saveSettings",value:function(){localStorage.setItem("FindThePairGrid",JSON.stringify({fraction:this.controllers.fraction.current,preview:this.controllers.preview.current,gameover:this.controllers.gameover.current}))}},{key:"readSettings",value:function(){var t=localStorage.getItem("FindThePairGrid"),e=JSON.parse(t);this.settings.fraction.default=e.fraction,this.settings.preview.default=e.preview,this.settings.gameover.default=e.gameover}}])&&T(e.prototype,n),t}())({fraction:{default:4,min:2,max:6},preview:{default:1,min:1,max:7},gameover:{default:1,min:1,max:15}}).run()}]);
//# sourceMappingURL=main.52106.js.map